<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<script type="text/javascript">
			// 数组:可以存储多个数据(array),数据可为不同类型
			
			// 定义数组(使用[]表示)
			var test = []; // 空数组
			var names = ['张三', '王五', '李四'];
			console.log(names);
			
			// 获取数组中数据:使用下表索引(从零开始)
			console.log(names.length)  // 数组长度(将数组长度设为0时为清空数组)
			console.log(names[0]);
			console.log(names[1]);
			
			// 更改数组
			// 修改数组元素:直接重新赋值
			names[1] = 'hello';
			console.log(names);
			// 新增数组元素
			names[3] = 'abc';
			console.log(names.length, names);
			// 不按索引赋值时,跳过的索引对应元素为undefined
			names[5] = 'fengdi';
			console.log(names);
			
			// 遍历数组元素
			var names = ['张三', '王五', '李四'];
			for (var i = 0; i < names.length; i++) {
				console.log(names[i]);
			}
			for (var i in names) {
				console.log(names[i]);
			}
			
			// 反向遍历数组
			var names = ['张三', '王五', '李四'];
			for (var i = names.length - 1; i >= 0; i--) {
				console.log(names[i]);
			}
			
			// 求数组中的最大值最小值
			var numbers = [65, 13, 95, 78, 21];
			// 假设数组中第一个数就是最大值,让后面的值与其比较,若有比假设最大值还大的就替换假设最大值为该值.
			var max = numbers[0]; 
			var min = numbers[0];
			var maxIndex = 0, minIndex = 0;
			/* 注意:若maxIndex ，minIndex不赋值为undefined,而数组第一项刚好为数组最大值或者最小值.
				此时for循环内部的if语句内部的内容不会执行,则maxIndex ，minIndex就不会改变结果就输出为undefined
				因此我们将maxIndex ，minIndex初始值赋值为0,避免上述情况.
			*/
			for (var i = 1; i < numbers.length; i++) {
				if (max < numbers[i]) {
					max = numbers[i];
					maxIndex = i;
				}
				if (min > numbers[i]) {
					min = numbers[i];
					minIndex = i;
				}
			}
			console.log(max, maxIndex);
			console.log(min, minIndex);
			
			// 将数组元素使用分隔符连接形成字符串
			var seperator = '|';
			var names = ['张三', '王五', '李四'];
			var str = names[0];
			for (var i = 1; i < names.length; i++) {
				str = str + seperator + names[i];
			}
			console.log(str);
			
			// 帅选数组:将数组中不为零的元素取出组成一个新的数组
			var numbers = [66, 0, 89, 75, 65, 42, 31, 0, 100, 0];
			var newArray = [];
			for (var i = 0; i < numbers.length; i++) {
				if (numbers[i] !== 0) {
					// 将空数组的长度作为索引依次存储值
					newArray[newArray.length] = numbers[i];
				}
			}
			console.log(newArray);
			
			// 翻转数组
			var numbers = [4, 5, 7, 9];
			var newArray = [];
			
			for (var i = numbers.length - 1; i >= 0; i--) {
				newArray[newArray.length] = numbers[i];
			}
			console.log(newArray);
			
			// 冒泡排序
			var numbers = [25, 68, 34, 18, 97, 63, 64];
			// 外层循环控制趟数
			for (var i = 0; i < numbers.length - 1; i++) {
				// 内层循环控制比较次数
				for (var j = 0; j < numbers.length - 1 - i; j++)
				{
					// 两两比较
					var tmp;
					if (numbers[j] > numbers[j+1]) {
						tmp = numbers[j];
						numbers[j] = numbers[j+1];
						numbers[j+1] = tmp;
					}
				}
			}
			console.log(numbers);
			
			// 冒泡排序优化
			var numbers = [25, 68, 34, 18, 97, 63, 64];
			var count = 1;
			// 外层循环控制趟数
			for (var i = 0; i < numbers.length - 1; i++) {
				count++;
				// 内层循环控制比较次数
				// 定义布尔型变量作为标志判断是否排序好
				var isSort = true;
				for (var j = 0; j < numbers.length - 1 - i; j++)
				{
					// 两两比较
					var tmp;
					count++;
					if (numbers[j] > numbers[j+1]) {
						isSort = false;
						tmp = numbers[j];
						numbers[j] = numbers[j+1];
						numbers[j+1] = tmp;
					}
				}
				// 某一趟结束,判断排序是否结束:根据相邻数据是否发生数据交换
				if (isSort) {
					break;
				}
			}
			console.log(count);
			console.log(numbers);
			
			// 数组对象常用方法
			// toString()与valueof()
			var arr = [4, 5, 6, 7];
			console.log(arr.toString());  // 数组转换为字符串,使用,分割每个元素输出
			console.log(arr.valueOf());  // 返回数组对象本身
			
			// 栈操作(先进后出):push pop
			var array = [1, 2, 3];
			var r = array.push(5, 6, 7);  // 入栈：数组尾部插入元素,可接受多个参数,返回值为添加完成后数组的长度
			console.log(r);  // push操作的返回值为插入完成后数组的长度
			console.log(array);
			var last = array.pop();  // 出栈：删除栈尾元素并返回,会修改数组长度
			console.log(last);  // pop()操作返回值为删除的元素
			console.log(array.length);
			console.log(array);
			
			// 队列操作(先进先出):push shift unshift
			var array = [1, 2, 3, 4];
			array.push(4);  // 增加元素
			console.log(array);
			
			var first = array.shift();  // 取出第一个元素并返回
			console.log(first);
			console.log(array);  // 数组长度减一
			
			var x = array.unshift('hello'); // 队列首部插入一个元素
			console.log(x);  // 返回插入元素后数组的长度
			console.log(array);
			
			// 排序方法:reverse sort
			// reverse: 原地翻转数组元素并返回翻转后的数组(原数组会改变)
			var array = ['a', 5, 6, 'name'];
			var newarray = array.reverse(); 
			console.log(array);
			console.log(newarray);
			
			// sort: 默认排序顺序，将元素转换为字符串，比较其UTF-16编码表
			var array = [6, 4, 12, 3];
			var sortarray = array.sort();  // 原地排序数组并返回排序后的数组(原数组会改变)
			console.log(array);
			console.log(sortarray);
			// sort内部实现:sort([compareFunction])可接受一个定义的比较函数来设定比较策略
			// 如果 compareFunction(a, b) 返回值小于 0 ，那么 a 会被排列到 b 之前
			// 如果 compareFunction(a, b) 返回值等于 0 ， a 和 b 的相对位置不变
			// 如果 compareFunction(a, b) 返回值大于 0 ， b 会被排列到 a 之前
			// 数值类型排序,比较函数写法如下:
			// function compareNumbers(a, b) {
			//   return a - b;
			// }
			// 使用匿名函数写法
			// numbers.sort(function(a, b) {
			//   return a - b;
			// });
			var array = [6, 4, 12, 3];
			function compare(a, b) {
				return a - b;  // 从大到小排序:return b - a;
			}
			var sortarray = array.sort(compare); 
			// var sortarray = array.sort(function (a, b) {
			// 	return a - b;  // 从大到小排序:return b - a;
			// }); 
			console.log(array);
			console.log(sortarray);
			// 按照字符串长度排序
			var array = ['hello', 'a', 'yuxi', 'hello  world'];
			var sortarray = array.sort(function (a, b) {
				return a.length - b.length;
			});
			console.log(sortarray);
			console.log(array);
			
			// 模拟sort方法内部实现
			// 冒泡排序(从小到大)
			var array = [4, 3, 68, 54, 97, 106];
			function sort(array, compareFunction) {
				for (var i = 0; i < array.length - 1; i++) {
					var isSort = true;
					for (var j = 0; j < array.length - 1 - i; j++) {
						// 此处控制排序策略,改变为接受一个函数,该函数接收两个参数(该函数控制排序的策略)
						if (compareFunction(array[j], array[j + 1]) > 0) {
							isSort = false;
							var tmp = array[j];
							array[j] = array[j + 1];
							array[j + 1] = tmp;
						}
					}
					if (isSort) {
						break;
					}
				}
			}
			// 从小到大排序:相当于array[j] - array[j + 1] > 0即array[j] > array[j + 1]时两者交换位置
			function compare01(a, b) {
				return a - b;
			}
			sort(array, compare01);
			// 匿名函数方法
			// sort(array, function (a, b) {
			// 	return a - b;
			// });
			console.log(array);
			// 从大到小排序:相当于array[j + 1] - array[j + 1] > 0即array[j + 1] > array[j]时两者交换位置
			function compare02(a, b) {
				return b - a;
			}
			sort(array, compare02);
			// 匿名函数方法
			// sort(array, function (a, b) {
			// 	return b - a;
			// });
			console.log(array);
			
			// 清除数组元素
			// arr = [];  建议使用
			// arr.length = 0;
			// arr.splice(0, arr.length);  不建议使用
			
			// 操作方法:concat slice splice
			// concat(value1[, value2[,...]]): 用于合并两个或多个数组,不会改变原数组,返回一个改变后的新数组
			var array = [4, 5, 6];
			var a = 'hello';
			var b = [1, 2];
			
			var test = array.concat(a); // 连接数组与字符串
			console.log(test);
			console.log(array);
			var test = array.concat(b);  // 连接两个数组
			console.log(test);
			
			// slice(begin[, end]): 从原数组截取一个新数组,不改变原数组,接受start end参数作为截取的起始和结束索引(不包括end)
			var array = ['hello', 'world', 'yuxi', 'fengdi', 5, 6, 7];
			var sliceArray = array.slice(2, 6); // 不包括结束索引值
			console.log(sliceArray);
			console.log(array);
			
			// splice(start[, deletecount[, item1[, item2[, ...]]]]): 删除或者替换数组元素或新增元素来修改数组(原数组会改变)
			
			// 位置方法:indexof lastindexof
			// indexof(searchElenment[, fromIndex]): 在数组中找到给定元素的第一个索引,未找到返回-1
			// lastindexof(searchElenment[, fromIndex = arr.length - 1]): 数组中寻找给定元素的最有一个索引值,从数组尾部开始寻找
			
			// 迭代方法
			// every(): 接受一个函数作为参数，用于测试数组所有元素是否能通过了提供的函数测试,返回一个布尔值
			// 将数组中的每个元素作为参数传入被调用的函数中,若所有元素执行后均返回true,结果为true,否则为false(有一个为false就会返回不再执行剩余测试)
			var array = [4, 20, 39, 28, 15];
			var result = array.every(function (current) {
				return current < 40;  // 判断数组所有元素是否均小于40
			});
			console.log(result)  
			// some(): 测试数组中是否有某些元素通过了提供的函数测试,返回布尔类型的值
			var array = [2, 4, 7, 9, 12];
			var result = array.some(function (element) {
				return element % 2 === 0;  // 判断是否有元素为2的倍数
			});
			console.log(result);
			// filter(): 筛选数组,筛选出通过测试的数组元素放到一个新数组内返回(数组元素作为参数执行函数，执行结果为true的数组元素留下放到新数组内)
			var array = ['hello ', 'name', 'yuxi', 'hello world'];
			// var result = array.filter(word => word.length === 4);
			var result = array.filter(function (current) {
				return current.length === 4;
			});
			console.log(result);
			// forEach(): 接受一个函数作为参数,将数组元素作为函数参数分别执行函数操作
			var array = [1, 2, 3, 4, 5];
			array.forEach(function (element) {
				console.log(element * element);
			});
			// map(): 将数组中的某个元素作为参数执行某个函数返回执行的结果,返回值为一个新数组,其元素为原数组元素执行函数的返回结果
			var array = [1, 2, 3, 4];
			// var newarray = array.map(x => x * 2);
			var newarray = array.map(function (current) {
				return current * 2;
			})
			console.log(newarray);

			// join(separator): 将数组元素连接为一个字符串并返回,若数组只有一个元素,返回的字符串无分隔符(默认为,)
			// 所有的数组元素被转换成字符串，再用一个分隔符将这些字符串连接起来, 如果一个元素为 undefined 或 null，它会被转换为空字符串
			var array = ['hello', 'world', 'name', 'fengdi'];
			var result = array.join('-');
			console.log(result);
		</script>
	</head>
	<body>
	</body>
</html>
